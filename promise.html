<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    




    <script>

let stocks = {
            fruits : ["strawberry","grapes","banana","apples"],
            liquid: ["water","ice"],
            holder : ["cone","cup","stick"],
            toppings: ["chocolate","peanuts"]
        };

        let is_shop_open = true;

        let order = (time,work) => {
            return new Promise((resolve,reject) => {
                if (is_shop_open){
                    setTimeout( () =>{
                        resolve(work ());
                    },time);
                }else{

                    reject(console.log("our shop is closed"));
                }
            });
        };


        order( 2000, ()=>{
            console.log(`${stocks.fruits[0]} was selected`);
        })


        .then(() => {
            return order ( 1000 ,() =>{
                console.log("the production has started")
            })
        })


        .then(() =>{
            return order (2000,() => {
                console.log("the fruits were choked ")
            })
        })


        .then( () => {
            return order ( 1000,() => {
                console.log(`${stocks.liquid[0]} and ${stocks.liquid[1]} is added`)
            })
        })

        .then( () =>{
            return order ( 1000,() => {
                console.log("the machine was started")
            })
        })


        .then( () => {
            return order ( 1000,() => {
                console.log(`the ice cream was palced on ${stocks.holder[1]}`)
            })
        })


        .then( () => {
            return order ( 3000,() =>{
                console.log(`${stocks.toppings[1]} is added as topping`)
            })
        })


        .then( () => {
            return order( 2000,() => {
                console.log("ice cream was served")
            })
        })

        .then( () => {
            return order (1000, () =>{
                console.log("THANK YOU & VISIT AGAIN")
            })
        })



        .catch( () => {
        console.log("customer left");
    })


        .finally( () =>{
            console.log("day ended ,shop closed")
        })


    </script>
</body>
</html>